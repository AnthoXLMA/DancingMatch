<div class="flex flex-col lg:flex-row gap-8 p-6 bg-gray-50 min-h-screen text-gray-800">

  <!-- Left Column: Profil Infos -->
  <div class="w-full lg:w-1/3 space-y-4">
    <div class="bg-white shadow-md rounded-xl p-6">
      <h2 class="text-2xl font-bold mb-4"><%= @profile.dance.title %></h2>
      <p class="text-sm text-gray-500">Level: <%= @profile.level %> — <%= @profile.niveau %></p>
      <p><%= @profile.investissement %> — <%= @profile.training_per_week %>h/week</p>

      <h3 class="mt-6 font-semibold text-lg">Compétences</h3>
      <ul class="space-y-1 text-sm">
        <li>XP: <%= @profile.xp %></li>
        <li>Coaching: <%= @profile.coaching_status %></li>
        <li>Pratique / semaine: <%= @profile.practice_a_week %></li>
        <li>Ambition: <%= @profile.ambition %></li>
        <li>Empathie: <%= @profile.empathie %></li>
        <li>Social: <%= @profile.social %></li>
      </ul>

      <div class="mt-6 space-y-2">
        <%= link_to "Modifier ce profil", edit_profile_path, class: "block w-full bg-blue-500 text-white rounded-md py-2 text-center hover:bg-blue-600" %>
        <%= button_to "Supprimer ce profil", user_profile_path(@profile), method: :delete, class: "block w-full bg-red-500 text-white rounded-md py-2 text-center hover:bg-red-600" %>
      </div>
    </div>

    <!-- Autres profils -->
    <div class="bg-white shadow-md rounded-xl p-4">
      <h4 class="text-md font-semibold mb-2">Autres profils</h4>
      <% @user.profiles.each do |perfil| %>
        <div class="flex items-center justify-between text-sm mb-2">
          <%= link_to perfil.dance.title, profile_path(perfil), class: "text-blue-600 hover:underline" %>
          <%= button_to "Supprimer", user_profile_path(perfil.id), method: :delete, class: "text-red-500 hover:text-red-700" %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Middle Column: Fil d’actualité -->
  <div class="w-full lg:w-1/3">
    <div class="bg-white shadow-md rounded-xl p-6">
      <h3 class="text-xl font-semibold mb-4">Fil d'actualité</h3>
      <p class="text-sm mb-4"><%= pluralize @requests.count, "demande" %></p>

      <% @requests.each do |req| %>
        <div class="border-b py-3">
          <p class="text-sm font-semibold"><%= req.user.first_name %> <%= req.user.last_name %></p>
          <p class="text-xs text-gray-500"><%= req.created_at.strftime("%d %B %Y") %></p>
          <%= image_tag req.user.photo, class: "mt-2 w-12 h-12 rounded-full object-cover" %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Right Column: Infos générales -->
  <div class="w-full lg:w-1/3 space-y-4">
    <div class="bg-white shadow-md rounded-xl p-6 space-y-2">
      <div><%= pluralize @profiles.count, "profil" %></div>
      <div><%= pluralize @users.count, "membre" %></div>
      <div><%= pluralize @appointments.count, "événement prévu" %></div>
    </div>

    <div class="bg-white shadow-md rounded-xl p-4 grid grid-cols-4 gap-2">
      <% @users.each do |user| %>
        <% if user.photo.attached? %>
          <%= cl_image_tag user.photo.key, class: "w-10 h-10 rounded-full object-cover" %>
        <% end %>
      <% end %>
    </div>
  </div>

  <ul id="results"></ul>
  <ul id="resultats"></ul>
  <form action="" id="form">
    <input type="email" id="email">
    <input type="password" id="password">
    <input type="submit">
  </form>
<script type="text/javascript">
  const skill = document.querySelector("#skill-id");
  const parseSkill = skill.querySelectorAll('p');
  const totalSkill = parseSkill.forEach(function(skillNumber) {
    function userTotal(skillNumber) {
      const calculate = skillNumber;
        let sum = 0;
          for (let i = 0; i < calculate.length; i++){
            sum += calculate[i];
          }
        };
      console.log(userTotal(parseSkill));
    });
  results.insertAdjacentHTML("beforeend",totalSkill);
  var somme = 0;
  for (var n=0; n <= 10; n = n+1) {
    somme = somme+n;
  }
  document.getElementById("results").innerHTML="Voilà où nous en sommes aujourd'hui, le début de Javascript! Bientôt nous pourrons créer des éléments dynamiques et autres fonctionnalités plus puissantes,plus rapides, et... plus techniques! Nous avons hâte d'achever ce projet! Ici, vous retrouverez l'ensemble des fonctions script de la page. Tentez parfois de recharger la page pour voir les changements. Essayez de faire défiler ce texte avec un compteur entre chaque lettre...";
</script>
<script>
  const signUp = (event) => {
  event.preventDefault()
  const emailValue = document.getElementById("email").value
  const passwordValue = document.getElementById("password").value
  fetch("https://reqres.in/api/register", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({"email": emailValue, "password": passwordValue})
  })
    .then(response => response.json())
    .then((data) => {
      console.log(data)
    })
  }
  const form = document.querySelector("#form")
  form.addEventListener("submit", signUp)
</script>
<script>
  var somme = 0;
  for (var n=0; n <= 10; n = n+1) {
    somme = somme+n;
  }
  document.getElementById("resultats").innerHTML="Somme = " +somme;
</script>
