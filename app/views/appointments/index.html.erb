<div class="container-card-profile">
  <div class="map-n-card">
    <div class="bouton-n-card">
      <h3>Rechercher un événement</h3>
          <%= form_tag appointments_path, method: :get do %>
            <%= text_field_tag :query, params[:appointment], class:"form-control", placeholder: "Lieu, ville ou événement" %>
            <%= submit_tag "Search", class:"btn btn-primary" %>
          <% end %>
        <div class="title_text">
          <p><%= link_to "Crée ton évenement", new_appointment_path, class:"btn btn-primary", id: "dance" %></p>
        </div>
        <div class ="container-appointments" style="height:auto;">
          <% @appointments.each do |appointment| %>
          <div class="appointment-card3">
            <div class="image-card-appointments">
              <%= image_tag appointment.pic if appointment.pic.attached? %>
            </div>
            <div class="information-event">
              <div id="event-uptitle">
                <h3><%= appointment.name  %></h3>
                <a><%= appointment.address %></a>
              </div>
              <div id="event-subinformations">
                <p> <%= appointment.dance.title %></p>
                <p> <%= appointment.user.first_name %></p>
                <p> Début: <%= appointment.start_on %></p>
                <p> Fin: <%= appointment.end_on %></p>
              </div>
            </div>
              <div id="click-participate">
                <input type="submit" class="btn btn-primary" value="Je participe">
              </div>
              <div class="horo" style="background-color:red; width:100px; height:20px; color:white; font-weight:bold; ">
                <ul id="cours"></ul>
              </div>
            </div>
          <% end %>
        </div>
    </div>
    <div class="container-map">
      <div id="map"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
  <div class="container text-center">
    <ul id="results" class="list-inline"></ul>
  </div>
</div>

<script>
// var buttons = document.querySelectorAll('#click-participate');
// // const results = document.querySelector("#results")
// var button  = buttons.forEach(button => {
//   var callajax = button.addEventListener('click', (event) => {
//   function reqListener () {
//     console.log(this.responseText);
//     var json  = JSON.parse(this.response);
//     var eur   = parseInt(json.EUR);
//     var dt    = new Date();
//     document.getElementById("cours").innerHTML=eur+ "&euro;";
//     // document.querySelector("#results").innerHTML="Maj "+dt.toLocaleString();
//   }
//   var oReq    = new XMLHttpRequest();
//   oReq.addEventListener("load", reqListener);
//   oReq.open("GET", "https://min-api.cryptocompare.com/data/price?fsym=BTC&tsyms=EUR");
//   oReq.send();
//     })
// });
</script>
<script>
const button = document.querySelector("#click-me")
button.addEventListener("click", (event) => {
  console.log(event);
  fetch(element)
  .then(response => response.json())
  .then((data) => {
    console.log(data);
  })
})

</script>
